# TODO

- **Реактивность в сторах** — При обновлении массивов в сторах (library.items, workspace.currentWorkspace.columns/cards) желательно по возможности менять только нужный элемент по индексу или через splice, чтобы избежать полного перерендеривания массива. Однако важно быть осторожным: в Vue 3 иногда требуется обновить ссылку на массив (через замену целиком, map, filter), чтобы гарантировать обновление UI, особенно если возникают проблемы с реактивностью. Проверьте library.ts и workspace.ts — менять элементы по индексу можно, если не ломается реактивность, иначе обновляйте ссылку на массив.

## Оптимизации кода

- повторяющиеся компоненты UI фронта вынеси в отдельные компоненты те что пропустили
- повторную логику вынеси в утилиты
- на сервере, проверь что для ошибок всех используется lib/errors.js и обрабатываются на фронте через toast (если чувствительная информация просто инфа об ошибке человеческим языком)
- решить конфликты (типов например) если есть
- Обнови README новыми сущьностями и фичами (если есть и он устарел)

Основные цели:

- избавиться от дублирования кода

## Фичи

## Баги

## Микрофиксы

## На далекое будущее

- roadmap
- загрузка фото из буфера в виде карточки (яндекс диск)
- AI-саммари — автоматическое резюме по карточке
  - AI-саммари конкретно по ссылке пишет в конспект (карточка типа ссылка) кнопка получить краткую выжимку
- совместный доступ к воркспейсам
- Новый вью (пространство как в миро)
- Отображать превью ссылок (если тип ссылка)

### Не уверен надо ли

- Экспорт/импорт JSON (всё) данные (какой кейс?)
- добавить дату выполнения + вью в хедере 2 (это же не задачник)
- давай реализуем большую фичу - Архив карточек/воркспейсов карточка отправляется в архив из модального окна редактирования воркспейс из своего модального окна. Для отображения архива есть отдельная вкладка вью (во 2ом хедере) там 2 радиокнопки архивные - карточки и воркспейсы. с поиском своим (архивные карточки удаляются вместе с воркспейсом и колонками соответственно, это на всякий прописал чтобы не было такого что некуда восстановить карточку) В общем как обычное поведение. архивные карточки и воркспейсы так-же с пагинацией как в хабе. В глобальном поиске архивные карточки не индексируются. (ВЫПОЛНЕННЫЕ ВРОДЕ И ТАК АРХИВ)
- из статистики переход к воркспейсам

### брейншторм с gpt


### Разбор конкретной фичи

Roadmap

- вставляется текстом
- есть готовый промпт (который можно скопировать и llm выдаст текст готовый к вставке) (на фронте только)
- можно отмечать любую ноду как выполненую
- можно удалять ноду (дочерние удаляются каскадом)
- можно редактировать - открывается окно с текстом

Вот неполная дб схема, думаю эти поля будут нужны
model Roadmap {
  id          String   @id @default(cuid())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  ownerId     String
  workspaceId String - думаю лучше сделать обязательным тк Roadmap жестко привязан к workspace

  title       String

  // Исходный текст, который пользователь вставил (полезно хранить)
  sourceText  String?  @db.LongText
  nodes RoadmapNode[]
}

model RoadmapNode {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  roadmapId String
  parentId  String?   // null =>  одна из корневых нод

  // порядок среди siblings (детей одного parentId)
  order     Int @default(0)

  title     String
  done      Boolean  @default(false)
}

в UI тк Roadmap жестко прявязан к воркспейсу
давай в воркспейсе добавим новый вид отображения (Колонки/Дорожная карта) будем использовать стили mode-tabs. А сами кнопки находиться будут в той строке где сейчас описание только справа. Думаю стандартный роут /workspace/:id показывает колонки а например /workspace/:id/roadmap уже новый вью